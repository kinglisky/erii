<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>Github Page 自定义域名免费 https 证书 • 芊野</title><meta name="description" content="Github Page 自定义域名免费 https 证书 - kinglisky"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.svg"><link rel="stylesheet" href="https://unpkg.com/nanoreset/nanoreset.min.css"><link rel="stylesheet" href="/css/theme.css"><link rel="search" type="application/opensearchdescription+xml" href="/atom.xml" title="芊野"></head><body><div class="wrap" id="barba-wrapper"><header><h1 class="branding"><a href="/" title="芊野"><img class="logo-image" src="/logo.svg" alt="logo"></a></h1><ul class="nav nav-list"><li class="nav-list-item"><a class="nav-list-link no-barba" href="/" target="_self">HOME</a></li><li class="nav-list-item"><a class="nav-list-link no-barba" href="/archives" target="_self">ARCHIVES</a></li><li class="nav-list-item"><a class="nav-list-link no-barba" href="/about" target="_self">ABOUT</a></li><li class="nav-list-item"><a class="nav-list-link no-barba" href="https://github.com/kinglisky" target="_blank">GITHUB</a></li></ul></header><div class="barba-container"><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Github Page 自定义域名免费 https 证书</h1><div class="post-info"><a></a>2018-03-28</div><div class="post-content"><p>现在各种组织都在推 <code>https</code> 协议，有很多网站都可以获取到免费 <code>https</code> 证书，比较知名的就是 <a href="https://letsencrypt.org/" target="_blank" rel="noopener">Let’s Encrypt</a> 了，不过这类服务一般都需要一个自定义域名关联一个自己的服务，在自己的服务端上配置好证书文件。</p>
<p>但很多时候，使用 Github 的小伙伴都会为自己的 github 首页关联一个自定义域名，例如我的 github-page 首页地址是 <a href="https://kinglisky.github.io" target="_blank" rel="noopener">kinglisky.github.io</a> 然后绑了个自定义的域名 <a href="https://nlush.com" target="_blank" rel="noopener">nlush.com</a>。</p>
<p>github 的 https 正式是针对 github.io 域下的，所以咱们绑定自定的域名是不支持 https 的，如何为 github-page 自定义域名加上 https 的小绿帽呢？</p>
<a id="more"></a>
<p>其实就是利用 <a href="https://www.cloudflare.com/" target="_blank" rel="noopener">Cloudflare</a> 提供的服务来做的。</p>
<blockquote>
<p>Cloudflare 提供一种被他们称之为 Universal SSL 的服务，可以让任意 HTTP 站点支持 HTTPS。它的原理是当访客使用 HTTPS 访问站点的时候，从访客到 Cloudflare 这段是加密的，然后从 Cloudflare 到站点这段是明文的。虽然不是全程加密，但也能很大程度加强网站的安全性。</p>
</blockquote>
<p>下面简单介绍一下：</p>
<h1 id="给-github-page-主页绑定自定义域名"><a href="#给-github-page-主页绑定自定义域名" class="headerlink" title="给 github-page 主页绑定自定义域名"></a>给 github-page 主页绑定自定义域名</h1><p>这个操作很简单，直接在自己的域名服务平台操作就行了，例如我的域名服务是阿里云提供的，直接为 <code>kinglisky.gihtub.io</code> 加了个 A 记录或者 CNAME，两者都行。不过这里个人推荐使用 A 记录，使用 CNAME 映射的时候 <code>Cloudflare</code> 的解析老是出错，后来换成 A 记录就好，不知道是不是人品问题，有兴趣的同学可以试试。</p>
<p>不知道自己 github-page 主页的 IP 地址的可以直接 <code>ping</code> 一下自己的 username.github.io 。</p>
<p><img src="https://ws1.sinaimg.cn/large/cd76e776gy1fpu4bdwdrxj20w8028dgf.jpg" alt=""></p>
<p>然后在自己的域名服务商上绑一下映射关系：</p>
<p><img src="https://ws1.sinaimg.cn/large/cd76e776gy1fpu4au1s1mj2148078gmd.jpg" alt=""></p>
<p>绑完后可以试试映射是不是正常的。</p>
<h1 id="注册-Cloudflare-添加站点"><a href="#注册-Cloudflare-添加站点" class="headerlink" title="注册 Cloudflare 添加站点"></a>注册 Cloudflare 添加站点</h1><p>先去 <a href="https://www.cloudflare.com" target="_blank" rel="noopener">https://www.cloudflare.com</a> 上注册一个账号。</p>
<p>然后添加站点：</p>
<p><img src="https://ws1.sinaimg.cn/large/cd76e776gy1fpu4cydkgtj21eu0o2jue.jpg" alt=""></p>
<p>添加完你的域名后，cloudflare 会自动扫描一波你自定义域名的 DNS 解析：</p>
<p><img src="https://ws1.sinaimg.cn/large/cd76e776gy1fpu4dvdz5aj21jc0fojtt.jpg" alt=""></p>
<p>可以看到我这边原来配置的 A 记录信息。切换到 Overview：</p>
<p><img src="https://ws1.sinaimg.cn/large/cd76e776gy1fpu4iig5srj21iw06s0tt.jpg" alt=""></p>
<p><img src="https://ws1.sinaimg.cn/large/cd76e776gy1fpu4hfhpcyj21iu0twjwt.jpg" alt=""></p>
<p>将你你域名服务商默认改成 cloudflare 提供的 DNS：</p>
<ul>
<li>leia.ns.cloudflare.com</li>
<li>thomas.ns.cloudflare.com</li>
</ul>
<p><img src="https://ws1.sinaimg.cn/large/cd76e776gy1fpu4lkzhrij212s0egmzc.jpg" alt=""></p>
<p>在阿里云上更改 DNS 服务器时会报不符合云解析 DNS 配置，可以直接忽略，不影响使用，配置完 DNS 后，DNS 生效需要一段时间，然后 cloudflare 开始为你的自定义域名配置解析，这里也需要一段时间，亲测大概需要 10 ~ 30 分钟，看人品吧。</p>
<p>生效后大概是这样的：</p>
<p><img src="https://ws1.sinaimg.cn/large/cd76e776gy1fpu4qvtzq8j21jc0gq405.jpg" alt=""></p>
<p>然后可以在 Crypto 面板查看颁发证书的状态，这里也需要小等一下，成功以后如下：</p>
<p><img src="https://ws1.sinaimg.cn/large/cd76e776gy1fpu4tbjukwj21lw0oqn0s.jpg" alt=""></p>
<p>然后可以把你需要的配置项配置上：</p>
<p><img src="https://ws1.sinaimg.cn/mw690/cd76e776gy1fpu4w93so4j21l20d0q4l.jpg" alt=""><br><img src="https://ws1.sinaimg.cn/mw690/cd76e776gy1fpu4w9iodgj21mi0f8tbd.jpg" alt=""><br><img src="https://ws1.sinaimg.cn/mw690/cd76e776gy1fpu4w9gskqj21ls0eujtk.jpg" alt=""></p>
<p>整体的操作流程大概是就是这样，然后自定域名的小绿帽就有了。</p>
<p><img src="https://ws1.sinaimg.cn/mw690/cd76e776gy1fpu4ybaq9ej20rq07uq3j.jpg" alt=""></p>
<h1 id="我的配置为啥没生效？"><a href="#我的配置为啥没生效？" class="headerlink" title="我的配置为啥没生效？"></a>我的配置为啥没生效？</h1><p>我刚开始配置的时候也没生效，后来多试了试，发现还是时间的问题，切换 DNS 和 cloudflare  服务生效都需要一段时间，淡定一点，慢慢来。</p>
<p>还有使用 cloudflare 提供的 DNS解析会慢个 100ms，毕竟是免费的东西，不能要求更多了。</p>
<p>PS 有问题可以直接在这里提问：<a href="https://github.com/kinglisky/blog/issues" target="_blank" rel="noopener">https://github.com/kinglisky/blog/issues</a></p>
<p>参考资料：</p>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/22667528" target="_blank" rel="noopener">开启 Github Pages 自定义域名 HTTPS 和 HTTP/2 支持​</a></li>
<li><a href="https://steffan.cn/2017/03/22/use-cloudflare-to-implement-HTTPS-for-GithubPages-with-custom-domain-names/" target="_blank" rel="noopener">使用 Cloudflare 为自定义域名的GithubPages实现HTTPS化</a></li>
<li><a href="https://leamtrop.com/2018/01/28/github-pages-cloudflare/" target="_blank" rel="noopener">Github Pages 免费使用 SSL 以及 CDN 加速</a></li>
</ul>
<p>刚听到的一首魔性的歌，哈哈~</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=504646385&auto=0&height=66"></iframe>

<p>晚安💤</p>
</div></article></div></main><footer><div class="paginator"><a class="prev" href="/2018/04/10/小修小补/">PREV</a><a class="next" href="/2017/10/14/VUE-组件的一点思考/">NEXT</a></div><div class="copyright"><p>&copy; 2018 <a href="https://ierii.com">芊野</a><br>Powered by <a href="https://hexo.io/" rel="noreferrer" target="_blank">Hexo</a></p></div></footer></div></div><script src="/js/barba.min.js"></script><script>document.addEventListener('DOMContentLoaded', function() {
    Barba.Pjax.start()
})</script></body></html>